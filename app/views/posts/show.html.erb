<div class="post">
    <%= @post.name %>

    <p class="image"><%= image_tag @post.image %></p>
</div>

<div class="votes">
    This post has <%= @post.get_likes.size %> <%= (@post.get_likes.size) == 1 ? "vote!" : "votes!" %>
    <% users_only do %>
        <% if current_user.liked? @post %>
            <%= image_tag("/assets/unvotebtn.png") %>

                <div class="unvote"> <%= button_to "Unvote?", unlike_post_path(@post),
                method: :get %>  </div>
        <% else %>
            <%= image_tag("/assets/votebtn.png") %>
            
                <div class="vote"><%= button_to "Vote!", like_post_path(@post),
                method: :get %> </div>
        <% end %>
    <% end %>
</div>

<div class="comments">
    <header>
        <h3> Comments: </h3>
    </header>

    <% comments = @post.comments.persisted.ordered %>
    <% if comments.any? %>
        <%= render comments %>
    <% else %>
        <p> No comments yet! </p>
    <% end %>

    <% users_only do %>
        <%= render "comments/form", post: @post, comment: @comment %>
    <% end %>
</div>

    <ul class="actions">
        <li><%= link_to "Return to the Emporium...", posts_path %></li>

        <% admins_only do %>
            <li><%= link_to "Edit this Margot", edit_admin_post_path(@post) %></li>
            <li><%= link_to "Remove this Margot", admin_post_path(@post),
            method: :delete,
            data: { confirm: "Do you want to remove this Margot?" } %></li>
        <% end %>
    </ul>
